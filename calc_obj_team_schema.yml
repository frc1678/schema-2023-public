# Used for running team calcs in Server
#
# Example:
#
# {'team_number': '29',
# 'auto_avg_cone_high': 4.2394,
# 'auto_avg_cone_mid': 1.3244,
# 'auto_avg_cone_low': 5.5123,
# 'auto_avg_cone_total': 10.8712,
# 'auto_avg_cube_high': 4.2394,
# 'auto_avg_cube_mid': 1.3244,
# 'auto_avg_cube_low': 1.3233,
# 'auto_avg_cube_total': 5.5324,
# 'tele_avg_cone_high': 4.2394,
# 'tele_avg_cone_mid': 1.3244,
# 'tele_avg_cone_low': 5.5123,
# 'tele_avg_cone_total': 10.8712,
# 'tele_avg_cube_high': 4.2394,
# 'tele_avg_cube_mid': 1.3244,
# 'tele_avg_cube_low': 1.3233,
# 'tele_avg_cube_total': 5.5324,
# 'avg_incap_time': 70.5843,
# 'avg_intakes_ground': 2.3432,
# 'avg_intakes_station': 12.9923,
# 'avg_intakes_low_row': 3.7159,
# 'total_intakes': 3.421,
# 'lfm_auto_avg_cone_high': 4.2394,
# 'lfm_auto_avg_cone_mid': 1.3244,
# 'lfm_auto_avg_cone_low': 5.5123,
# 'lfm_auto_avg_cone_total': 10.8712,
# 'lfm_auto_avg_cube_high': 4.2394,
# 'lfm_auto_avg_cube_mid': 1.3244,
# 'lfm_auto_avg_cube_low': 1.3233,
# 'lfm_auto_avg_cube_total': 5.5324,
# 'lfm_tele_avg_cone_high': 4.2394,
# 'lfm_tele_avg_cone_mid': 1.3244,
# 'lfm_tele_avg_cone_low': 5.5123,
# 'lfm_tele_avg_cone_total': 10.8712,
# 'lfm_tele_avg_cube_high': 4.2394,
# 'lfm_tele_avg_cube_mid': 1.3244,
# 'lfm_tele_avg_cube_low': 1.3233,
# 'lfm_tele_avg_cube_total': 5.5324,
# 'lfm_avg_incap_time': 70.5843,
# 'lfm_avg_intakes_ground': 2.3432,
# 'lfm_avg_intakes_station': 12.9923,
# 'lfm_avg_intakes_low_row': 3.7159,
# 'lfm_total_intakes': 40,
# 'auto_sd_cone_high': 2.2394,
# 'auto_sd_cone_mid': 3.3244,
# 'auto_sd_cone_low': 1.5123,
# 'auto_sd_cone_total': 3.3764
# 'auto_sd_cube_high': 4.2394,
# 'auto_sd_cube_mid': 6.3244,
# 'auto_sd_cube_low': 1.3233,
# 'auto_sd_cube_total': 0.5324,
# 'tele_sd_cone_high': 2.2394,
# 'tele_sd_cone_mid': 5.3244,
# 'tele_sd_cone_low': 3.5123,
# 'tele_sd_cone_total': 2.3957
# 'tele_sd_cube_high': 2.2394,
# 'tele_sd_cube_mid': 7.3244,
# 'tele_sd_cube_low': 0.3233,
# 'tele_sd_cube_total': 4.2336
# 'auto_charge_attempts': 6,
# 'auto_dock_successes': 2,
# 'auto_engage_successes': 4,
# 'tele_charge_attempts': 10,
# 'tele_dock_successes': 5,
# 'tele_engage_successes': 7,
# 'tele_park_successes': 2,
# 'matches_incap': 3,
# 'position_zero_starts': 0,
# 'position_one_starts': 3,
# 'position_two_starts': 9,
# 'position_three_starts': 1,
# 'lfm_auto_charge_attempts': 8,
# 'lfm_auto_dock_successes': 4,
# 'lfm_auto_engage_successes': 3,
# 'lfm_tele_charge_attempts': 10,
# 'lfm_tele_dock_successes': 0,
# 'lfm_tele_engage_successes': 9,
# 'lfm_tele_park_successes': 1,
# 'lfm_matches_incap': 4,
# 'lfm_position_zero_starts': 3,
# 'lfm_position_one_starts': 2,
# 'lfm_position_two_starts': 5,
# 'lfm_position_three_starts': 2,
# 'mode_start_position': 'TWO',
# 'lfm_mode_start_position': 'FOUR',
# 'mode_auto_charge_level': 'ENGAGE',
# 'lfm_mode_auto_charge_level': ENGAGE',
# 'mode_tele_charge_level': 'DOCK',
# 'lfm_mode_tele_charge_level': 'PARK',}
#

# Contains information about this schema file
schema_file:
  # Version of schema file
  # Incremented every merged schema change
  version: 9

# Stores fields that will be added to database but do not require calculations
data:
  team_number:
    type: str

# Averages of fields in consolidated TIMs
averages:
  auto_avg_cone_high:
    tim_fields: [obj_tim.auto_cone_high]
    type: float
  auto_avg_cone_mid:
    tim_fields: [obj_tim.auto_cone_mid]
    type: float
  auto_avg_cone_low:
    tim_fields: [obj_tim.auto_cone_low]
    type: float
  auto_avg_cone_total:
    tim_fields: [obj_tim.auto_total_cones]
    type: float
  auto_avg_cube_high:
    tim_fields: [obj_tim.auto_cube_high]
    type: float
  auto_avg_cube_mid:
    tim_fields: [obj_tim.auto_cube_mid]
    type: float
  auto_avg_cube_low:
    tim_fields: [obj_tim.auto_cube_low]
    type: float
  auto_avg_cube_total:
    tim_fields: [obj_tim.auto_total_cubes]
    type: float
  tele_avg_cone_high:
    tim_fields: [obj_tim.tele_cone_high]
    type: float
  tele_avg_cone_mid:
    tim_fields: [obj_tim.tele_cone_mid]
    type: float
  tele_avg_cone_low:
    tim_fields: [obj_tim.tele_cone_low]
    type: float
  tele_avg_cone_total:
    tim_fields: [obj_tim.tele_total_cones]
    type: float
  tele_avg_cube_high:
    tim_fields: [obj_tim.tele_cube_high]
    type: float
  tele_avg_cube_mid:
    tim_fields: [obj_tim.tele_cube_mid]
    type: float
  tele_avg_cube_low:
    tim_fields: [obj_tim.tele_cube_low]
    type: float
  tele_avg_cube_total:
    tim_fields: [obj_tim.tele_total_cubes]
    type: float
  avg_incap_time:
    tim_fields: [obj_tim.incap]
    type: float
  avg_gamepieces:
    tim_fields: [obj_tim.tele_total_gamepieces]
    type: float
  avg_intakes_ground:
    tim_fields: [obj_tim.intakes_ground]
    type: float
  avg_intakes_station:
    tim_fields: [obj_tim.intakes_station]
    type: float
  avg_intakes_low_row:
    tim_fields: [obj_tim.intakes_low_row]
    type: float
  total_intakes:
    tim_fields: [obj_tim.total_intakes]
    type: float
  lfm_auto_avg_cone_high:
    tim_fields: [obj_tim.auto_cone_high]
    type: float
  lfm_auto_avg_cone_mid:
    tim_fields: [obj_tim.auto_cone_mid]
    type: float
  lfm_auto_avg_cone_low:
    tim_fields: [obj_tim.auto_cone_low]
    type: float
  lfm_auto_avg_cone_total:
    tim_fields: [obj_tim.auto_total_cones]
    type: float
  lfm_auto_avg_cube_high:
    tim_fields: [obj_tim.auto_cube_high]
    type: float
  lfm_auto_avg_cube_mid:
    tim_fields: [obj_tim.auto_cube_mid]
    type: float
  lfm_auto_avg_cube_low:
    tim_fields: [obj_tim.auto_cube_low]
    type: float
  lfm_auto_avg_cube_total:
    tim_fields: [obj_tim.auto_total_cubes]
    type: float
  lfm_tele_avg_cone_high:
    tim_fields: [obj_tim.tele_cone_high]
    type: float
  lfm_tele_avg_cone_mid:
    tim_fields: [obj_tim.tele_cone_mid]
    type: float
  lfm_tele_avg_cone_low:
    tim_fields: [obj_tim.tele_cone_low]
    type: float
  lfm_tele_avg_cone_total:
    tim_fields: [obj_tim.tele_total_cones]
    type: float
  lfm_tele_avg_cube_high:
    tim_fields: [obj_tim.tele_cube_high]
    type: float
  lfm_tele_avg_cube_mid:
    tim_fields: [obj_tim.tele_cube_mid]
    type: float
  lfm_tele_avg_cube_low:
    tim_fields: [obj_tim.tele_cube_low]
    type: float
  lfm_tele_avg_cube_total:
    tim_fields: [obj_tim.tele_total_cubes]
    type: float
  lfm_avg_intakes_ground:
    tim_fields: [obj_tim.intakes_ground]
    type: float
  lfm_avg_intakes_station:
    tim_fields: [obj_tim.intakes_station]
    type: float
  lfm_avg_intakes_low_row:
    tim_fields: [obj_tim.intakes_low_row]
    type: float
  lfm_total_intakes:
    tim_fields: [obj_tim.total_intakes]
    type: float
  lfm_avg_incap_time:
    tim_fields: [obj_tim.incap]
    type: float
  lfm_avg_gamepieces:
    tim_fields: [obj_tim.tele_total_gamepieces]
    type: float
  tele_avg_gamepiece_low:
    tim_fields: [obj_tim.tele_total_gamepiece_low]

# Standard deviations of fields in consolidated TIMs
# Used for predictions
standard_deviations:
  auto_sd_cone_high:
    tim_fields: [obj_tim.auto_cone_high]
    type: float
  auto_sd_cone_mid:
    tim_fields: [obj_tim.auto_cone_mid]
    type: float
  auto_sd_cone_low:
    tim_fields: [obj_tim.auto_cone_low]
    type: float
  auto_sd_cone_total:
    tim_fields: [obj_tim.auto_total_cones]
    type: float
  auto_sd_cube_high:
    tim_fields: [obj_tim.auto_cube_high]
    type: float
  auto_sd_cube_mid:
    tim_fields: [obj_tim.auto_cube_mid]
    type: float
  auto_sd_cube_low:
    tim_fields: [obj_tim.auto_cube_low]
    type: float
  auto_sd_cube_total:
    tim_fields: [obj_tim.auto_total_cubes]
    type: float
  tele_sd_cone_high:
    tim_fields: [obj_tim.tele_cone_high]
    type: float
  tele_sd_cone_mid:
    tim_fields: [obj_tim.tele_cone_mid]
    type: float
  tele_sd_cone_low:
    tim_fields: [obj_tim.tele_cone_low]
    type: float
  tele_sd_cone_total:
    tim_fields: [obj_tim.tele_total_cones]
    type: float
  tele_sd_cube_high:
    tim_fields: [obj_tim.tele_cube_high]
    type: float
  tele_sd_cube_mid:
    tim_fields: [obj_tim.tele_cube_mid]
    type: float
  tele_sd_cube_low:
    tim_fields: [obj_tim.tele_cube_low]
    type: float
  tele_sd_cube_total:
    tim_fields: [obj_tim.tele_total_cubes]
    type: float
  sd_gamepieces:
    tim_fields: [obj_tim.tele_total_gamepieces]
    type: float

# Counts of occurrences in consolidated TIMs
counts:
  auto_charge_attempts:
    tim_fields:
      not:
        obj_tim.auto_charge_attempt: 0
    type: int
  auto_dock_successes:
    tim_fields:
      obj_tim.auto_charge_level: 'DOCK'
    type: int
  auto_engage_successes:
    tim_fields:
      obj_tim.auto_charge_level: 'ENGAGE'
    type: int
  tele_charge_attempts:
    tim_fields:
      not:
        obj_tim.tele_charge_attempt: 0
    type: int
  tele_dock_successes:
    tim_fields:
      obj_tim.tele_charge_level: 'DOCK'
    type: int
  tele_engage_successes:
    tim_fields:
      obj_tim.tele_charge_level: 'ENGAGE'
    type: int
  tele_park_successes:
    tim_fields:
      obj_tim.tele_charge_level: 'PARK'
    type: int
  position_zero_starts:
    tim_fields:
      obj_tim.start_position: 'ZERO'
    type: int
  position_one_starts:
    tim_fields:
      obj_tim.start_position: 'ONE'
    type: int
  position_two_starts:
    tim_fields:
      obj_tim.start_position: 'TWO'
    type: int
  position_three_starts:
    tim_fields:
      obj_tim.start_position: 'THREE'
    type: int
  position_four_starts:
    tim_fields:
      obj_tim.start_position: 'FOUR'
    type: int
  matches_incap:
    tim_fields:
      not:
        obj_tim.incap: 0
    type: int
  matches_played:
    tim_fields:
      not:
        match_number: 0
    type: int
  lfm_position_zero_starts:
    tim_fields:
      obj_tim.start_position: 'ZERO'
    type: int
  lfm_position_one_starts:
    tim_fields:
      obj_tim.start_position: 'ONE'
    type: int
  lfm_position_two_starts:
    tim_fields:
      obj_tim.start_position: 'TWO'
    type: int
  lfm_position_three_starts:
    tim_fields:
      obj_tim.start_position: 'THREE'
    type: int
  lfm_position_four_starts:
    tim_fields:
      obj_tim.start_position: 'FOUR'
    type: int
  lfm_auto_charge_attempts:
    tim_fields:
      not:
        obj_tim.auto_charge_attempt: 0
    type: int
  lfm_auto_dock_successes:
    tim_fields:
      obj_tim.auto_charge_level: 'DOCK'
    type: int
  lfm_auto_engage_successes:
    tim_fields:
      obj_tim.auto_charge_level: 'ENGAGE'
    type: int
  lfm_tele_charge_attempts:
    tim_fields:
      not:
        obj_tim.tele_charge_attempt: 0
    type: int
  lfm_tele_dock_successes:
    tim_fields:
      obj_tim.tele_charge_level: 'DOCK'
    type: int
  lfm_tele_engage_successes:
    tim_fields:
      obj_tim.tele_charge_level: 'ENGAGE'
    type: int
  lfm_tele_park_successes:
    tim_fields:
      obj_tim.tele_charge_level: 'PARK'
    type: int
  lfm_matches_incap:
    tim_fields:
      not:
        obj_tim.incap: 0
    type: int

# Objective counts collected by Super Scouts
super_counts:
  matches_scored_coop:
    type: int
    tim_fields: [subj_tim.scored_coop]

# Maximum or minimum values in consolidated TIMs
extrema:
  auto_max_cone_high:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cone_high]
  auto_max_cone_mid:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cone_mid]
  auto_max_cone_low:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cone_low]
  auto_max_cones:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_total_cones]
  auto_max_cube_high:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cube_high]
  auto_max_cube_mid:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cube_mid]
  auto_max_cube_low:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cube_low]
  auto_max_cubes:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_total_cubes]
  tele_max_cone_high:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cone_high]
  tele_max_cone_mid:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cone_mid]
  tele_max_cone_low:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cone_low]
  tele_max_cones:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_total_cones]
  tele_max_cube_high:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cube_high]
  tele_max_cube_mid:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cube_mid]
  tele_max_cube_low:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cube_low]
  tele_max_cubes:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_total_cubes]
  max_gamepieces:
    extrema_type: max
    tim_fields: [obj_tim.tele_total_gamepieces]
    type: int
  max_incap:
    extrema_type: max
    tim_fields: [obj_tim.incap]
    type: int
  max_auto_charge_level:
    extrema_type: max
    tim_fields: [obj_tim.auto_charge_level]
    type: str
  max_tele_charge_level:
    extrema_type: max
    tim_fields: [obj_tim.tele_charge_level]
    type: str
  lfm_auto_max_cone_high:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cone_high]
  lfm_auto_max_cone_mid:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cone_mid]
  lfm_auto_max_cone_low:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cone_low]
  lfm_auto_max_cones:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_total_cones]
  lfm_auto_max_cube_high:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cube_high]
  lfm_auto_max_cube_mid:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cube_mid]
  lfm_auto_max_cube_low:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_cube_low]
  lfm_auto_max_cubes:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.auto_total_cubes]
  lfm_tele_max_cone_high:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cone_high]
  lfm_tele_max_cone_mid:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cone_mid]
  lfm_tele_max_cone_low:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cone_low]
  lfm_tele_max_cones:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_total_cones]
  lfm_tele_max_cube_high:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cube_high]
  lfm_tele_max_cube_mid:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cube_mid]
  lfm_tele_max_cube_low:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_cube_low]
  lfm_tele_max_cubes:
    extrema_type: max
    type: int
    tim_fields: [obj_tim.tele_total_cubes]
  lfm_max_gamepieces:
    extrema_type: max
    tim_fields: [obj_tim.tele_total_gamepieces]
    type: int
  lfm_max_incap:
    extrema_type: max
    tim_fields: [obj_tim.incap]
    type: int
  lfm_max_auto_charge_level:
     extrema_type: max
     tim_fields: [obj_tim.auto_charge_level]
     type: str
  lfm_max_tele_charge_level:
    extrema_type: max
    tim_fields: [obj_tim.tele_charge_level]
    type: str
  

# Most common values
modes:
  mode_preloaded_gamepiece:
    tim_fields: [obj_tim.preloaded_gamepiece]
    ignore: null
    type: List
  mode_start_position:
    tim_fields: [obj_tim.start_position]
    ignore: 'ZERO'
    type: List
  lfm_mode_start_position:
    tim_fields: [obj_tim.start_position]
    ignore: 'ZERO'
    type: List
  mode_auto_charge_level:
    tim_fields: [obj_tim.auto_charge_level]
    ignore: 'NONE'
    type: List
  lfm_mode_auto_charge_level:
    tim_fields: [obj_tim.auto_charge_level]
    ignore: 'NONE'
    type: List
  mode_tele_charge_level:
    tim_fields: [obj_tim.tele_charge_level]
    ignore: 'NONE'
    type: List
  lfm_mode_tele_charge_level:
    tim_fields: [obj_tim.tele_charge_level]
    ignore: 'NONE'
    type: List

success_rates:
  charge_percent_success:
    team_successes: [auto_dock_successes, tele_dock_successes, auto_engage_successes, tele_engage_successes]
    team_attempts: [auto_charge_attempts, tele_charge_attempts]
    type: float
  lfm_charge_percent_success:
    team_successes: [lfm_auto_dock_successes, lfm_tele_dock_successes, lfm_auto_engage_successes, lfm_tele_engage_successes]
    team_attempts: [lfm_auto_charge_attempts, lfm_tele_charge_attempts]
    type: float
  auto_charge_percent_success:
    team_successes: [auto_engage_successes, auto_dock_successes]
    team_attempts: [auto_charge_attempts]
    type: float
  lfm_auto_charge_percent_success:
    team_successes: [lfm_auto_engage_successes, lfm_auto_dock_successes]
    team_attempts: [lfm_auto_charge_attempts]
    type: float
  tele_charge_percent_success:
    team_successes: [tele_engage_successes, tele_dock_successes]
    team_attempts: [tele_charge_attempts]
    type: float
  lfm_tele_charge_percent_success:
    team_successes: [lfm_tele_engage_successes, lfm_tele_dock_successes]
    team_attempts: [lfm_tele_charge_attempts]
    type: float
  

# Calculates average points for given fields
average_points:
  avg_tele_charge_points:
    point_fields: [tele_dock_successes, tele_engage_successes]
    point_values: [6, 10]
    type: float
  avg_auto_charge_points:
    point_fields: [auto_dock_successes, auto_engage_successes]
    point_values: [8, 12]
    type: float
